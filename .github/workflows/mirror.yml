name: ðŸªž Mirror to GitLab

on:
  push:
    branches: [main, testing]

jobs:
  mirror:
    runs-on: ubuntu-latest
    steps:
      - name: ðŸ”„ Mirror to GitLab
        run: |
          # Clona el repositorio COMPLETO (todas las ramas)
          git clone --mirror https://github.com/Canexy/Django_OlimpiApp.git repo-dir
          cd repo-dir
          
          # Configura GitLab como remoto
          git remote add gitlab https://oauth2:${{ secrets.GITLAB_TOKEN }}@gitlab.com/Canexy/Django_OlimpiApp.git
          
          # Push de TODAS las ramas y tags a GitLab
          git push --mirror gitlab
          
          echo "âœ… Todas las ramas sincronizadas con GitLab"
